<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚­ãƒ£ãƒ©æ§‹æˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ - Palette Generator Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #667eea;
      --primary-dark: #764ba2;
      --text-dark: #1a1a2e;
      --text-light: #6b7280;
      --bg-light: #f9fafb;
      --shadow: 0 10px 15px rgba(102, 126, 234, 0.15);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html.light {
      background: linear-gradient(135deg, #f8fafb 0%, #f0f4ff 100%);
      color: var(--text-dark);
    }

    html.dark {
      background: linear-gradient(180deg, #0a0a15 0%, #141420 100%);
      color: #f3f4f6;
    }

    body {
      font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
      line-height: 1.6;
      transition: var(--transition);
      padding: 40px 20px 60px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .page-header {
      margin-bottom: 40px;
    }

    .page-header h1 {
      font-family: 'Syne', sans-serif;
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-header p {
      font-size: 1.05rem;
      opacity: 0.7;
      font-weight: 500;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 28px;
      margin-bottom: 40px;
    }

    .card {
      padding: 32px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.95);
      border: 2px solid rgba(102, 126, 234, 0.1);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
      pointer-events: none;
    }

    .card:hover::before {
      left: 100%;
    }

    html.dark .card {
      background: rgba(22, 22, 32, 0.95);
      border-color: rgba(102, 126, 234, 0.15);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(102, 126, 234, 0.2);
      border-color: rgba(102, 126, 234, 0.25);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(102, 126, 234, 0.2);
    }

    .card-header {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    }

    html.dark .card-header {
      border-bottom-color: rgba(255, 255, 255, 0.06);
    }

    .card-header h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .char-display {
      text-align: center;
      padding: 40px;
      background: rgba(102, 126, 234, 0.08);
      border-radius: 12px;
      border: 2px solid rgba(102, 126, 234, 0.2);
      margin-bottom: 16px;
    }

    .char-icon {
      font-size: 3rem;
      margin-bottom: 12px;
    }

    .char-name {
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
    }

    .char-list {
      display: grid;
      gap: 8px;
    }

    .char-item {
      padding: 12px 16px;
      border-radius: 8px;
      background: rgba(102, 126, 234, 0.1);
      border: 1px solid rgba(102, 126, 234, 0.2);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .char-item:hover {
      background: rgba(102, 126, 234, 0.15);
      border-color: rgba(102, 126, 234, 0.4);
    }

    .char-item-icon {
      font-size: 1.5rem;
    }

    .char-item-name {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
      letter-spacing: 0.3px;
      width: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .composition-section {
      background: rgba(102, 126, 234, 0.05);
      border: 2px dashed rgba(102, 126, 234, 0.2);
      border-radius: 16px;
      padding: 40px;
      text-align: center;
    }

    .composition-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .composition-display {
      font-size: 2rem;
      margin-bottom: 20px;
    }

    @media (max-width: 768px) {
      body {
        padding: 30px 16px 50px;
      }

      .page-header h1 {
        font-size: 1.8rem;
      }

      .grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .card {
        padding: 24px;
        border-radius: 14px;
      }

      .char-display {
        padding: 32px 20px;
      }

      .char-icon {
        font-size: 2.5rem;
      }

      .btn {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .card {
        padding: 16px;
        border-radius: 12px;
      }

      .char-display {
        padding: 24px 16px;
        border-radius: 10px;
      }

      .char-icon {
        font-size: 2rem;
        margin-bottom: 8px;
      }

      .char-name {
        font-size: 0.9rem;
      }

      .char-item {
        padding: 10px 12px;
        font-size: 0.85rem;
      }

      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <nav id="mainNav"></nav>

  <div class="container">
    <div class="page-header">
      <h1>ã‚­ãƒ£ãƒ©æ§‹æˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
      <p>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å®¹å§¿ãƒ»è¨­å®šãƒ»ä¸–ç•Œè¦³ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§ç”Ÿæˆã—ã¾ã™ï¼ˆãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼‰</p>
    </div>
    <div class="history-nav" id="historyNav"></div>

    <div style="display:flex;gap:12px;align-items:center;margin-bottom:18px;flex-wrap:wrap;">
      <label for="countSelect" style="font-weight:600;">ç”Ÿæˆäººæ•°</label>
      <select id="countSelect" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);">
        <option value="1">1äºº</option>
        <option value="2">2äºº</option>
        <option value="3" selected>3äºº</option>
        <option value="4">4äºº</option>
        <option value="5">5äºº</option>
      </select>
      <label for="variantNum" style="font-weight:600;">è¤‡æ•°æ¡ˆ</label>
      <select id="variantNum" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);">
        <option value="1">1å¸¯</option>
        <option value="3">3å¸¯</option>
        <option value="5" selected>5å¸¯</option>
      </select>
      <button class="btn btn-primary" id="generateBtn" style="width:auto;">ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ</button>
    </div>

    <div class="grid" id="charsGrid">
      <!-- JSãŒã“ã“ã«ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ -->
    </div>

    <div class="composition-section">
      <div class="composition-title">ã‚·ãƒ¼ãƒ³æ§‹æˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆè¦ç´„ï¼‰</div>
      <div class="composition-display" id="composition">â€”</div>
      <div style="margin-top:12px;text-align:left;">
        <div class="composition-title">è©³ç´°ï¼ˆã‚³ãƒ”ãƒ¼å¯ï¼‰</div>
        <pre id="detailedList" style="white-space:pre-wrap;background:transparent;border:none;padding:8px;margin-top:8px;">â€”</pre>
      </div>
      <button class="btn btn-primary" onclick="saveComposition()">ğŸ’¾ æ§‹æˆã‚’ä¿å­˜</button>
    </div>
  </div>

  <script src="common.js"></script>
  <script>
    const firstNames = ['ã‚¢ã‚ªã‚¤','ãƒ¦ã‚¦','ã‚«ãƒŠ','ã‚·ãƒ§ã‚¦','ãƒŸãƒŠ','ãƒªã‚¯','ã‚µãƒ©','ã‚±ã‚¤','ãƒãƒ«','ãƒ¦ã‚­','ã‚¿ã‚¯','ãƒŠãƒ„','ãƒ¬ãƒ³','ãƒŸã‚ª','ãƒ’ãƒŠ','ã‚½ã‚¦ã‚¿','ãƒªãƒŠ','ãƒ¦ã‚¦ã‚¿','ãƒã‚³ãƒˆ','ãƒ¦ã‚¤','ã‚«ã‚ªãƒª','ãƒŠã‚ª','ã‚³ã‚¦','ã‚µã‚­','ãƒ’ãƒ­'];
    const ages = ['ä¹³å¹¼å…','å¹¼å¹´','å…ç«¥','å°‘å¹´','å°‘å¥³','é’æ˜¥æœŸ','é’å¹´','æˆäºº','ä¸­å¹´','å£®å¹´','é«˜å¹´'];
    const roles = ['ä¸»äººå…¬','æ•µå½¹','è„‡å½¹','ç›¸æ£’','å…ˆç”Ÿ','éƒ¨ä¸‹','ä¸Šå¸','éš£äºº','æ—…äºº','ç ”ç©¶è€…','æ‹äºº','è¦ªå‹','å¸«åŒ ','ãƒ©ã‚¤ãƒãƒ«','è£åˆ‡ã‚Šè€…','å­ä¾›æ™‚ä»£ã®å‹äºº'];
    const appearances = ['é•·é«ª','çŸ­é«ª','å·»ãé«ª','ãƒœãƒ–','åŠä¸»','ãƒ„ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ«','ãƒãƒ‹ãƒ¼ãƒ†ãƒ¼ãƒ«','ç„¡é€ ä½œãƒ˜ã‚¢','ç™½é«ª','éŠ€é«ª','é‡‘é«ª','é»’é«ª','è‰²ä»˜ãé«ª','ç™–æ¯›','ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ˜ã‚¢','ãã›æ¯›','ç·¨ã¿è¾¼ã¿'];
    const clothes = ['ã‚¹ãƒ¼ãƒ„','ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«','å’Œè£…','ã‚¹ãƒãƒ¼ãƒ†ã‚£','ãƒ•ã‚©ãƒ¼ãƒãƒ«','ã‚¹ãƒˆãƒªãƒ¼ãƒˆ','ãƒ©ãƒ•','ãƒ‰ãƒ¬ã‚¹','åˆ¶æœ','ã‚´ã‚¹ãƒ­ãƒª','ãƒ‘ãƒ³ã‚¯','å†’é™ºè€…ã®è£…å‚™','ãƒ­ãƒ¼ãƒ–','ã‚³ãƒ¼ãƒˆ','ã‚¢ãƒ¼ãƒãƒ¼'];
    const personalities = ['å†·é™','æƒ…ç†±çš„','ãŠã£ã¨ã‚Š','ã‚¯ãƒ¼ãƒ«','é™½æ°—','é™°ã‚­ãƒ£','é¢å€’è¦‹ãŒè‰¯ã„','æ¯’èˆŒ','å¤©ç„¶','å¯¡é»™','ãŠèª¿å­è€…','å …å®Ÿ','å¤§èƒ†','è‡†ç—…','åˆç†ä¸»ç¾©'];
    const specialTraits = ['ç¾©æ‰‹','ã‚¿ãƒˆã‚¥ãƒ¼','çœ¼å¸¯','çœ¼é¡','å‚·è·¡','ãƒšãƒƒãƒˆã‚’é€£ã‚Œã¦ã„ã‚‹','ç¾©è¶³','ã‚µã‚¤ãƒãƒ¼ç¾©ä½“','é­”æ³•ã®å°','ä¸æ€è­°ãªç³','åŒå­ã®å°','ç•°å½¢ã®ã—ã‚‹ã—','äººå·¥å¿ƒè‡“'];
    const worlds = ['è¿‘æœªæ¥éƒ½å¸‚','ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ç‹å›½','ç¾ä»£æ—¥æœ¬','è’å»ƒã—ãŸä¸–ç•Œ','å­¦åœ’éƒ½å¸‚','å°ã•ãªæ¸¯ç”º','å®‡å®™ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³','ç”°èˆã®æ‘','ä¸­ä¸–é¢¨éƒ½å¸‚','ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯éƒ½å¸‚','ç•°ä¸–ç•Œã®æ£®æ—','ç ‚æ¼ ã®ã‚ªã‚¢ã‚·ã‚¹'];

    function rand(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function generateRandomCharacter() {
      const name = rand(firstNames) + (Math.random() < 0.5 ? '' : (' ' + rand(['A','B','C','X','Z'])));
      return {
        name: name,
        age: rand(ages),
        role: rand(roles),
        appearance: rand(appearances),
        clothes: rand(clothes),
        personality: rand(personalities),
        trait: Math.random() < 0.4 ? rand(specialTraits) : '',
        world: rand(worlds)
      };
    }

    function renderCharacters(count) {
      const grid = document.getElementById('charsGrid');
      grid.innerHTML = '';
      const characters = [];
      for (let i = 0; i < count; i++) {
        const c = generateRandomCharacter();
        characters.push(c);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-header"><h3>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ ${sanitizeHTML(String(i+1))} - ${sanitizeHTML(c.role)}</h3></div>
          <div style="padding:16px;">
            <div style="font-weight:700;font-size:1rem;margin-bottom:8px;">${sanitizeHTML(c.name)}ï¼ˆ${sanitizeHTML(c.age)}ï¼‰</div>
            <div style="margin-bottom:6px;">å®¹å§¿: ${sanitizeHTML(c.appearance)} / æœè£…: ${sanitizeHTML(c.clothes)}</div>
            <div style="margin-bottom:6px;">æ€§æ ¼: ${sanitizeHTML(c.personality)}${c.trait ? ' / ç‰¹å¾´: ' + sanitizeHTML(c.trait) : ''}</div>
            <div style="opacity:0.8;font-size:0.95rem;margin-top:8px;">ä¸–ç•Œè¦³: ${sanitizeHTML(c.world)}</div>
          </div>
        `;
        grid.appendChild(card);
      }
      updateComposition(characters);
    }

    function updateComposition(characters) {
      if (!characters || characters.length === 0) {
        document.getElementById('composition').textContent = 'â€”';
        document.getElementById('detailedList').textContent = 'â€”';
        return;
      }
      const summary = characters.map((c, i) => `${i+1}:${c.role}(${c.age})`).join(' ï¼ ');
      document.getElementById('composition').textContent = summary;

      const details = characters.map((c, i) => {
        return `ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ ${i+1} - ${c.name} (${c.role})\nå¹´é½¢å±¤: ${c.age}\nå®¹å§¿: ${c.appearance}\næœè£…: ${c.clothes}\næ€§æ ¼: ${c.personality}${c.trait ? '\nç‰¹å¾´: '+c.trait : ''}\nä¸–ç•Œè¦³: ${c.world}`;
      }).join('\n\n');
      document.getElementById('detailedList').textContent = details;
    }

    function saveComposition() {
      const text = document.getElementById('detailedList').textContent;
      if (!text || text === 'â€”') {
        showToast('âš ï¸ ç”Ÿæˆã•ã‚ŒãŸæ§‹æˆãŒã‚ã‚Šã¾ã›ã‚“', 2000, 'warning');
        return;
      }
      navigator.clipboard && navigator.clipboard.writeText(text).then(() => {
        showToast('âœ… æ§‹æˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ', 2000, 'success');
      }).catch(() => {
        showToast('âœ… æ§‹æˆã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸï¼‰', 2000, 'success');
      });
    }

    function renderMultipleVariants(count, variantNum) {
      const grid = document.getElementById('charsGrid');
      grid.innerHTML = '';
      
      for (let v = 0; v < variantNum; v++) {
        const characters = [];
        const variantDiv = document.createElement('div');
        variantDiv.style.cssText = 'margin-bottom: 32px; padding: 20px; background: rgba(102,126,234,0.05); border-radius: 12px; border-left: 4px solid var(--primary);';
        
        const variantTitle = document.createElement('h4');
        variantTitle.textContent = `æ¡ˆ${v+1}ç¾¤`;
        variantTitle.style.cssText = 'margin-bottom: 16px; font-family: Syne; color: var(--primary); font-size: 1.1rem;';
        variantDiv.appendChild(variantTitle);
        
        const charGrid = document.createElement('div');
        charGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px;';
        
        for (let i = 0; i < count; i++) {
          const c = generateRandomCharacter();
          characters.push(c);
          const card = document.createElement('div');
          card.className = 'card';
          card.style.marginBottom = '0';
          card.innerHTML = `
            <div class="card-header"><h3>ã‚­ãƒ£ãƒ© ${i+1} - ${c.role}</h3></div>
            <div style="padding:16px;">
              <div style="font-weight:700;font-size:1rem;margin-bottom:8px;">${c.name}ï¼ˆ${c.age}ï¼‰</div>
              <div style="margin-bottom:6px;">å®¹å§¿: ${c.appearance} / æœè£…: ${c.clothes}</div>
              <div style="margin-bottom:6px;">æ€§æ ¼: ${c.personality}${c.trait ? ' / ç‰¹å¾´: ' + c.trait : ''}</div>
              <div style="opacity:0.8;font-size:0.95rem;margin-top:8px;">ä¸–ç•Œè¦³: ${c.world}</div>
            </div>
          `;
          charGrid.appendChild(card);
        }
        
        variantDiv.appendChild(charGrid);
        grid.appendChild(variantDiv);
      }
      
      showToast(`ğŸ² ${count}äººã®${variantNum}ã‚Šãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆã—ã¾ã—ãŸ`, 1200, 'success');
    }

    document.addEventListener('DOMContentLoaded', () => {
      buildNav('chara');
      buildHistoryNav('chara-generator-enterprise.html');
      const countSelect = document.getElementById('countSelect');
      const generateBtn = document.getElementById('generateBtn');
      function doGenerate() {
        const n = parseInt(countSelect.value, 10) || 3;
        const variantNum = parseInt(document.getElementById('variantNum').value, 10) || 1;
        if (variantNum === 1) {
          renderCharacters(n);
        } else {
          renderMultipleVariants(n, variantNum);
        }
      }
      generateBtn.addEventListener('click', doGenerate);
      // åˆæœŸè¡¨ç¤º
      renderCharacters(parseInt(countSelect.value, 10));
    });
  </script>
</body>
</html>
